\hypertarget{trie_8c}{}\section{src/trie.c File Reference}
\label{trie_8c}\index{src/trie.c@{src/trie.c}}
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include \char`\"{}trie.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stack.\+h\char`\"{}}\newline
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structTrieNode}{Trie\+Node}}
\item 
struct \mbox{\hyperlink{structTrie}{Trie}}
\item 
struct \mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{trie_8c_af1a7c03acee3a2514368aad264dbf1b4}{V\+A\+L\+L\+OC}}(x,  type,  n)~(x = (type$\ast$)malloc((n) $\ast$ sizeof $\ast$(x)))
\item 
\#define \mbox{\hyperlink{trie_8c_aeec41e4e56ad469263c69f00318d4422}{A\+L\+L\+OC}}(x,  type)~\mbox{\hyperlink{trie_8c_af1a7c03acee3a2514368aad264dbf1b4}{V\+A\+L\+L\+OC}}(x, type, 1)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structTrieNode}{Trie\+Node}} \mbox{\hyperlink{trie_8c_a00768dcc81f7f258a804f2e4e6f37d09}{Trie\+Node}}
\item 
typedef void($\ast$ \mbox{\hyperlink{trie_8c_a2930134ffa16d71fb37514b22bc3ff46}{destructor\+\_\+t}}) (void $\ast$)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structTrie}{Trie}} $\ast$ \mbox{\hyperlink{trie_8c_a0b4926c622607e593ec9ceeeacc6d5d9}{trie\+\_\+create}} (const struct \mbox{\hyperlink{structTrieOps}{Trie\+Ops}} ops)
\item 
void \mbox{\hyperlink{trie_8c_a0bae8af01708c30ced3ecfe57e35067a}{trie\+\_\+destroy}} (\mbox{\hyperlink{structTrie}{Trie}} $\ast$trie)
\item 
size\+\_\+t \mbox{\hyperlink{trie_8c_a3cfd530552e7ec075229aa9e22979ede}{trie\+\_\+maxkeylen\+\_\+added}} (\mbox{\hyperlink{structTrie}{Trie}} $\ast$trie)
\item 
int \mbox{\hyperlink{trie_8c_ab81b3de6ec6517c401c7b405e4f18fb3}{trie\+\_\+insert}} (\mbox{\hyperlink{structTrie}{Trie}} $\ast$trie, char $\ast$key, void $\ast$val)
\item 
int \mbox{\hyperlink{trie_8c_ae126fc59d33595f7dd6c689c241d2080}{trie\+\_\+delete}} (\mbox{\hyperlink{structTrie}{Trie}} $\ast$trie, char $\ast$key)
\item 
void $\ast$ \mbox{\hyperlink{trie_8c_a9f18803659abb76370cd52e8b031c002}{trie\+\_\+find}} (\mbox{\hyperlink{structTrie}{Trie}} $\ast$trie, char $\ast$key)
\item 
void \mbox{\hyperlink{trie_8c_a9c497ea4aae3f4eced8749368e93698d}{trie\+\_\+iter\+\_\+destroy}} (\mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$iter)
\item 
\mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$ \mbox{\hyperlink{trie_8c_a6e521735f7d4b998912170fce1a16eb5}{trie\+\_\+findall}} (\mbox{\hyperlink{structTrie}{Trie}} $\ast$trie, const char $\ast$key\+\_\+prefix, size\+\_\+t max\+\_\+keylen)
\item 
void \mbox{\hyperlink{trie_8c_a29af5e6478255dab9bd6d2ddcd9ebaf6}{trie\+\_\+iter\+\_\+next}} (\mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$$\ast$iter\+\_\+p)
\item 
const char $\ast$ \mbox{\hyperlink{trie_8c_ac8cd6936775bf3f25b5c51607dfda62e}{trie\+\_\+iter\+\_\+getkey}} (const \mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$iter)
\item 
void $\ast$ \mbox{\hyperlink{trie_8c_a74977c6f67a3f3740ae481759967fafb}{trie\+\_\+iter\+\_\+getval}} (const \mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$iter)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{trie_8c_aeec41e4e56ad469263c69f00318d4422}\label{trie_8c_aeec41e4e56ad469263c69f00318d4422}} 
\index{trie.c@{trie.c}!ALLOC@{ALLOC}}
\index{ALLOC@{ALLOC}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{ALLOC}{ALLOC}}
{\footnotesize\ttfamily \#define A\+L\+L\+OC(\begin{DoxyParamCaption}\item[{}]{x,  }\item[{}]{type }\end{DoxyParamCaption})~\mbox{\hyperlink{trie_8c_af1a7c03acee3a2514368aad264dbf1b4}{V\+A\+L\+L\+OC}}(x, type, 1)}

\mbox{\Hypertarget{trie_8c_af1a7c03acee3a2514368aad264dbf1b4}\label{trie_8c_af1a7c03acee3a2514368aad264dbf1b4}} 
\index{trie.c@{trie.c}!VALLOC@{VALLOC}}
\index{VALLOC@{VALLOC}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{VALLOC}{VALLOC}}
{\footnotesize\ttfamily \#define V\+A\+L\+L\+OC(\begin{DoxyParamCaption}\item[{}]{x,  }\item[{}]{type,  }\item[{}]{n }\end{DoxyParamCaption})~(x = (type$\ast$)malloc((n) $\ast$ sizeof $\ast$(x)))}



\subsection{Typedef Documentation}
\mbox{\Hypertarget{trie_8c_a2930134ffa16d71fb37514b22bc3ff46}\label{trie_8c_a2930134ffa16d71fb37514b22bc3ff46}} 
\index{trie.c@{trie.c}!destructor\_t@{destructor\_t}}
\index{destructor\_t@{destructor\_t}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{destructor\_t}{destructor\_t}}
{\footnotesize\ttfamily typedef void($\ast$ destructor\+\_\+t) (void $\ast$)}

\mbox{\Hypertarget{trie_8c_a00768dcc81f7f258a804f2e4e6f37d09}\label{trie_8c_a00768dcc81f7f258a804f2e4e6f37d09}} 
\index{trie.c@{trie.c}!TrieNode@{TrieNode}}
\index{TrieNode@{TrieNode}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{TrieNode}{TrieNode}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structTrieNode}{Trie\+Node}}  \mbox{\hyperlink{structTrieNode}{Trie\+Node}}}



\subsection{Function Documentation}
\mbox{\Hypertarget{trie_8c_a0b4926c622607e593ec9ceeeacc6d5d9}\label{trie_8c_a0b4926c622607e593ec9ceeeacc6d5d9}} 
\index{trie.c@{trie.c}!trie\_create@{trie\_create}}
\index{trie\_create@{trie\_create}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_create()}{trie\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structTrie}{Trie}}$\ast$ trie\+\_\+create (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structTrieOps}{Trie\+Ops}}}]{ops }\end{DoxyParamCaption})}

Instantiate a trie.


\begin{DoxyParams}{Parameters}
{\em ops} & Set of trie value operations \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Allocated trie structure or N\+U\+LL if out of memory 
\end{DoxyReturn}
\mbox{\Hypertarget{trie_8c_ae126fc59d33595f7dd6c689c241d2080}\label{trie_8c_ae126fc59d33595f7dd6c689c241d2080}} 
\index{trie.c@{trie.c}!trie\_delete@{trie\_delete}}
\index{trie\_delete@{trie\_delete}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_delete()}{trie\_delete()}}
{\footnotesize\ttfamily int trie\+\_\+delete (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTrie}{Trie}} $\ast$}]{trie,  }\item[{char $\ast$}]{key }\end{DoxyParamCaption})}

Delete a key from the trie.

The deletion will fail if the required amount of free memory is not available. In case of failure, the trie is left unchanged.


\begin{DoxyParams}{Parameters}
{\em trie} & \mbox{\hyperlink{structTrie}{Trie}} context \\
\hline
{\em key} & C-\/string of the key to remove \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success or -\/1 on failure 
\end{DoxyReturn}
\mbox{\Hypertarget{trie_8c_a0bae8af01708c30ced3ecfe57e35067a}\label{trie_8c_a0bae8af01708c30ced3ecfe57e35067a}} 
\index{trie.c@{trie.c}!trie\_destroy@{trie\_destroy}}
\index{trie\_destroy@{trie\_destroy}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_destroy()}{trie\_destroy()}}
{\footnotesize\ttfamily void trie\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTrie}{Trie}} $\ast$}]{trie }\end{DoxyParamCaption})}

Destroy a trie.


\begin{DoxyParams}{Parameters}
{\em trie} & \mbox{\hyperlink{structTrie}{Trie}} returned by {\ttfamily trie\+\_\+create} \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{trie_8c_a9f18803659abb76370cd52e8b031c002}\label{trie_8c_a9f18803659abb76370cd52e8b031c002}} 
\index{trie.c@{trie.c}!trie\_find@{trie\_find}}
\index{trie\_find@{trie\_find}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_find()}{trie\_find()}}
{\footnotesize\ttfamily void$\ast$ trie\+\_\+find (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTrie}{Trie}} $\ast$}]{trie,  }\item[{char $\ast$}]{key }\end{DoxyParamCaption})}

Find a value from the trie given it\textquotesingle{}s key.


\begin{DoxyParams}{Parameters}
{\em trie} & \mbox{\hyperlink{structTrie}{Trie}} context \\
\hline
{\em key} & C-\/string of the key the requested value was inserted with. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Requested value or N\+U\+LL if not found 
\end{DoxyReturn}
\mbox{\Hypertarget{trie_8c_a6e521735f7d4b998912170fce1a16eb5}\label{trie_8c_a6e521735f7d4b998912170fce1a16eb5}} 
\index{trie.c@{trie.c}!trie\_findall@{trie\_findall}}
\index{trie\_findall@{trie\_findall}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_findall()}{trie\_findall()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}}$\ast$ trie\+\_\+findall (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTrie}{Trie}} $\ast$}]{trie,  }\item[{const char $\ast$}]{key\+\_\+prefix,  }\item[{size\+\_\+t}]{max\+\_\+len }\end{DoxyParamCaption})}

Create an iterator to cover all keys with a given prefix and maximum size.

N\+U\+LL will be returned either if the amount of free memory required is not available or if there are no keys to begin with subject to the given prefix and length constraints.

Keys will be enumerated in ascending lexicographic order, i.\+e. {\ttfamily strcmp(key1, key2)} will be negative if {\ttfamily key1} is enumerated before {\ttfamily key2}.

Enumeration without a maximum length constraint can be done by passing the return value of {\ttfamily trie\+\_\+maxkeylen\+\_\+added} in the third argument.


\begin{DoxyParams}{Parameters}
{\em trie} & \mbox{\hyperlink{structTrie}{Trie}} context \\
\hline
{\em key\+\_\+prefix} & C-\/string prefixing all keys to enumerate \\
\hline
{\em max\+\_\+len} & Upper bound on the lengths of the keys to enumerate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Valid iterator or N\+U\+LL 
\end{DoxyReturn}
\mbox{\Hypertarget{trie_8c_ab81b3de6ec6517c401c7b405e4f18fb3}\label{trie_8c_ab81b3de6ec6517c401c7b405e4f18fb3}} 
\index{trie.c@{trie.c}!trie\_insert@{trie\_insert}}
\index{trie\_insert@{trie\_insert}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_insert()}{trie\_insert()}}
{\footnotesize\ttfamily int trie\+\_\+insert (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTrie}{Trie}} $\ast$}]{trie,  }\item[{char $\ast$}]{key,  }\item[{void $\ast$}]{val }\end{DoxyParamCaption})}

Insert a key-\/value pair into a trie.

Values inserted with a pre-\/existing key will replace the corresponding pre-\/existing value and the pre-\/existing value will be destroyed.

The insertion will fail either if the required amount of free memory is not available or if {\ttfamily val} is N\+U\+LL. In case of failure, the trie is left unchanged.


\begin{DoxyParams}{Parameters}
{\em trie} & \mbox{\hyperlink{structTrie}{Trie}} context \\
\hline
{\em key} & C-\/string of the key \\
\hline
{\em val} & Non-\/null pointer to the value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success or -\/1 on failure 
\end{DoxyReturn}
\mbox{\Hypertarget{trie_8c_a9c497ea4aae3f4eced8749368e93698d}\label{trie_8c_a9c497ea4aae3f4eced8749368e93698d}} 
\index{trie.c@{trie.c}!trie\_iter\_destroy@{trie\_iter\_destroy}}
\index{trie\_iter\_destroy@{trie\_iter\_destroy}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_iter\_destroy()}{trie\_iter\_destroy()}}
{\footnotesize\ttfamily void trie\+\_\+iter\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$}]{iter }\end{DoxyParamCaption})}

Destroy an iterator.


\begin{DoxyParams}{Parameters}
{\em iter} & Iterator to destroy \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{trie_8c_ac8cd6936775bf3f25b5c51607dfda62e}\label{trie_8c_ac8cd6936775bf3f25b5c51607dfda62e}} 
\index{trie.c@{trie.c}!trie\_iter\_getkey@{trie\_iter\_getkey}}
\index{trie\_iter\_getkey@{trie\_iter\_getkey}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_iter\_getkey()}{trie\_iter\_getkey()}}
{\footnotesize\ttfamily const char$\ast$ trie\+\_\+iter\+\_\+getkey (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$}]{iter }\end{DoxyParamCaption})}

Get the key at the current iterator.

The content of the string returned by this function is undefined if the iterator is subsequently advanced.


\begin{DoxyParams}{Parameters}
{\em iter} & Current iterator \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Iterator key 
\end{DoxyReturn}
\mbox{\Hypertarget{trie_8c_a74977c6f67a3f3740ae481759967fafb}\label{trie_8c_a74977c6f67a3f3740ae481759967fafb}} 
\index{trie.c@{trie.c}!trie\_iter\_getval@{trie\_iter\_getval}}
\index{trie\_iter\_getval@{trie\_iter\_getval}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_iter\_getval()}{trie\_iter\_getval()}}
{\footnotesize\ttfamily void$\ast$ trie\+\_\+iter\+\_\+getval (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$}]{iter }\end{DoxyParamCaption})}

Get the value at the current iterator.


\begin{DoxyParams}{Parameters}
{\em iter} & Current iterator \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Iterator value or N\+U\+LL if the iterator is invalid 
\end{DoxyReturn}
\mbox{\Hypertarget{trie_8c_a29af5e6478255dab9bd6d2ddcd9ebaf6}\label{trie_8c_a29af5e6478255dab9bd6d2ddcd9ebaf6}} 
\index{trie.c@{trie.c}!trie\_iter\_next@{trie\_iter\_next}}
\index{trie\_iter\_next@{trie\_iter\_next}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_iter\_next()}{trie\_iter\_next()}}
{\footnotesize\ttfamily void trie\+\_\+iter\+\_\+next (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTrieIterator}{Trie\+Iterator}} $\ast$$\ast$}]{iter\+\_\+p }\end{DoxyParamCaption})}

Advance an iterator to the next valid (key, value) pair.

Iterators are invalidated either if the iterator has ended or if the amount of free memory required to proceed with the iteration is not available. {\ttfamily $\ast$iter\+\_\+p}, if invalidated, is set to N\+U\+LL.

Behavior of a valid iterator, after any trie modification, is undefined.


\begin{DoxyParams}{Parameters}
{\em iter\+\_\+p} & Pointer to valid iterator or N\+U\+LL \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{trie_8c_a3cfd530552e7ec075229aa9e22979ede}\label{trie_8c_a3cfd530552e7ec075229aa9e22979ede}} 
\index{trie.c@{trie.c}!trie\_maxkeylen\_added@{trie\_maxkeylen\_added}}
\index{trie\_maxkeylen\_added@{trie\_maxkeylen\_added}!trie.c@{trie.c}}
\subsubsection{\texorpdfstring{trie\_maxkeylen\_added()}{trie\_maxkeylen\_added()}}
{\footnotesize\ttfamily size\+\_\+t trie\+\_\+maxkeylen\+\_\+added (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTrie}{Trie}} $\ast$}]{trie }\end{DoxyParamCaption})}

Get the length of the longest key added in the trie.

Sizes of keys that were previously added but do not exist are counted. Sizes of keys that were not added due to a failure are not counted.


\begin{DoxyParams}{Parameters}
{\em trie} & \mbox{\hyperlink{structTrie}{Trie}} context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Size of the longest key 
\end{DoxyReturn}
